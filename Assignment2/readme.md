## 101作业2  
123三个作业是连贯而成的 所以有些1中的功能可以移植过来    
### 必需内容 略  
### 提高内容 略  
### 个人尝试  
#### 移植上次作业中的内容  
首先是沿用上个框架的功能 虽然说是沿用 但移植的时候会遇到一些问题的  
下面主要记录一下遇到的问题和解决方法  
##### 性能问题  
原本第二次作业的帧率就堪忧 现在移动的比较近的时候帧数会更要命 个人感觉优化速度是必要的了  
采取了以下的手段：  
* 去除AA：查看了程序性能的图片发现反走样占掉了足足60%的性能 所以我暂时把这个功能去掉了 没办法cpu实在难干gpu的活   
* 优化重心计算：原来给的重心坐标计算函数非要把三个值全按一大串算出来 明明算了两个第三个就知道了的   
* O3优化：这个优化是最后在编译的时候加上的 用上之后效果相当明显 终于是有了不错的流畅度 不得不说编译器还是厉害的   

##### 程序崩溃  
在移植的过程中 有时候会出现程序崩溃的情况 并且当视角向各方向移动时画面会逐渐扭曲直至崩溃 相当迷惑  
经过一番排查发现 问题的根源在于原本的程序框架根本没有判断三角形会在屏幕之外 仍然将三角形的顶点信息传入函数 从而导致光栅化函数中使用一个太大的x或y坐标获取相应像素的信息导致崩溃    
实际操作为在三角形光栅化中将包围盒限制在屏幕内部即可    